[{"path":"https://atsyplenkov.github.io/HBVr/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 HBVr authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://atsyplenkov.github.io/HBVr/articles/Download-HBV-parameters.html","id":"disclaimer-preprocessing-logic","dir":"Articles","previous_headings":"","what":"1) Disclaimer & Preprocessing logic","title":"Download HBV parameters","text":"Beneath example can one download preprocess HBV parameter maps created Beck et al. (2020). initial dataset distributed NetCDF file. package provides opportunity retreive original (v0.8) revised (v0.9) versions datasets. v0.8 version contains ten cross-validation folds 12 parameters: BETA – Shape coefficient recharge function FC – Maximum soil moisture storage (mm) K0 – Recession coefficient upper zone (day−1) K1 – Recession coefficient upper zone (day−1) K2 – Recession coefficient lower zone (day−1) LP – Soil moisture value actual evaporation reaches potential evaporation PERC – Maximum percolation lower zone (mm day−1) UZL – Threshold parameter extra outflow upper zone (mm) TT – Threshold temperature (°C) CFMAX – Degree‐day factor (mm °−11 day−1) CFR – Refreezing coefficient CWH – Water holding capacity v0.9 version authors added four parameters: MAXBAS – base triangular routing function (days) SFCF – Snowfall correction factor (-) PCORR – general precipitation correction factor (-) CET – potential evaporation correction factor (-) converted every fold Cloud-Optimized GeoTiff (COG) using following GDAL command: gdal_translate ordinary.tif COG.tiff -co COPY_SRC_OVERVIEWS=YES -co COMPRESS=LZW -co TILED=YES. final COG validated using python script. Thus ended 10 COGs 12 bands .","code":""},{"path":"https://atsyplenkov.github.io/HBVr/articles/Download-HBV-parameters.html","id":"example-workflow","dir":"Articles","previous_headings":"","what":"2) Example workflow","title":"Download HBV parameters","text":"essential aim hbv_get_parameters function ease accessibility HBV parameter maps created Beck et al. (2020). Therefore function allows download cross-validation folds particular area interest (AOI). Let’s imagine, need download first, second fifth folds Luxembourg. Initially, hbv_get_parameters function two types output. First mean zonal statistics computed terra::global background. Second one simple SpatRaster output. download 1, 2 5 folds need specify function. example can retrieve mean values entire Luxembourg. output zonal_stat hidden ↓ download SpatRaster objects need run following code chunk: output rasters hidden ↓ function returns list SpatRaster objects. first one, .e. Fold 1, can plotted like :","code":"library(HBVr) #> Loading required package: terra #> terra 1.6.7 # library(tmap) # for vizualisztion purposes # library(sf) # for vizualisztion purposes  # Locate the shapefile f <- system.file(\"ex/lux.shp\", package=\"terra\") # Read it as SpatVector v <- vect(f)  # Plot it! # tmap_mode(\"view\") #  # tm_basemap(\"Stamen.Terrain\") + #   tm_shape(st_as_sf(v)) + #   tm_polygons() zonal_stat <-    hbv_get_parameters(     AOI = v,     folds = c(1, 2, 5),     mean = TRUE   ) #> Downloading rasters... #> Cropping rasters... zonal_stat #> $fold_0 #>                mean #> BETA     3.59133975 #> CET      0.00000000 #> CFMAX    4.76274042 #> CFR      0.02329523 #> CWH      0.03688424 #> FC     557.79513737 #> K0       0.11312447 #> K1       0.22010622 #> K2       0.14379373 #> LP       0.78630368 #> MAXBAS   1.80986611 #> PCORR    1.00000000 #> PERC     3.55778855 #> SFCF     1.00000000 #> TT      -0.06733536 #> UZL     56.14696222 #>  #> $fold_1 #>                 mean #> BETA    5.235857e+00 #> CET     0.000000e+00 #> CFMAX   2.665556e+00 #> CFR     2.929959e-04 #> CWH     6.203691e-04 #> FC      6.595314e+02 #> K0      9.967822e-02 #> K1      2.003403e-01 #> K2      1.708671e-01 #> LP      9.336371e-01 #> MAXBAS  2.038171e+00 #> PCORR   1.000000e+00 #> PERC    3.316196e-01 #> SFCF    1.000000e+00 #> TT     -2.557204e-01 #> UZL     5.925521e+01 #>  #> $fold_4 #>                mean #> BETA   4.567642e+00 #> CET    0.000000e+00 #> CFMAX  3.155823e+00 #> CFR    3.054426e-02 #> CWH    3.499128e-05 #> FC     5.611259e+02 #> K0     5.050571e-02 #> K1     2.136054e-01 #> K2     1.490991e-01 #> LP     8.979798e-01 #> MAXBAS 1.969578e+00 #> PCORR  1.000000e+00 #> PERC   2.001591e+00 #> SFCF   1.000000e+00 #> TT     1.804570e-01 #> UZL    9.997002e+01 rasters <-    hbv_get_parameters(     AOI = v,     folds = c(1, 2, 5),     mean = FALSE   ) #> Downloading rasters... #> Cropping rasters... #> Projecting rasters... rasters #> $fold_0 #> class       : SpatRaster  #> dimensions  : 8, 8, 16  (nrow, ncol, nlyr) #> resolution  : 0.1, 0.1  (x, y) #> extent      : 5.7, 6.5, 49.4, 50.2  (xmin, xmax, ymin, ymax) #> coord. ref. : +proj=longlat +datum=WGS84 +no_defs  #> source      : memory  #> names       :     BETA, CET,    CFMAX,        CFR,        CWH,       FC, ...  #> min values  : 2.750727,   0, 4.120560, 0.02307616, 0.03650405, 526.2200, ...  #> max values  : 4.076468,   0, 5.260039, 0.02346940, 0.03710934, 596.8556, ...  #>  #> $fold_1 #> class       : SpatRaster  #> dimensions  : 8, 8, 16  (nrow, ncol, nlyr) #> resolution  : 0.1, 0.1  (x, y) #> extent      : 5.7, 6.5, 49.4, 50.2  (xmin, xmax, ymin, ymax) #> coord. ref. : +proj=longlat +datum=WGS84 +no_defs  #> source      : memory  #> names       :     BETA, CET,    CFMAX,         CFR,          CWH,       FC, ...  #> min values  : 3.752313,   0, 2.646058, 0.000000000, 0.0005433661, 595.1489, ...  #> max values  : 6.000000,   0, 2.686393, 0.001583559, 0.0007155714, 726.9780, ...  #>  #> $fold_4 #> class       : SpatRaster  #> dimensions  : 8, 8, 16  (nrow, ncol, nlyr) #> resolution  : 0.1, 0.1  (x, y) #> extent      : 5.7, 6.5, 49.4, 50.2  (xmin, xmax, ymin, ymax) #> coord. ref. : +proj=longlat +datum=WGS84 +no_defs  #> source      : memory  #> names       :     BETA, CET,    CFMAX,        CFR,          CWH,       FC, ...  #> min values  : 3.373822,   0, 3.016764, 0.03044694, 2.118881e-05, 501.1906, ...  #> max values  : 5.262473,   0, 3.247912, 0.03059574, 5.475432e-05, 623.8236, ... plot(rasters[[1]])"},{"path":"https://atsyplenkov.github.io/HBVr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Anatoly Tsyplenkov. Maintainer, author.","code":""},{"path":"https://atsyplenkov.github.io/HBVr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Tsyplenkov (2022). HBVr: Get HBV Parameters. https://github.com/atsyplenkov/HBVr, https://atsyplenkov.github.io/HBVr/.","code":"@Manual{,   title = {HBVr: Get HBV Parameters},   author = {Anatoly Tsyplenkov},   year = {2022},   note = {https://github.com/atsyplenkov/HBVr, https://atsyplenkov.github.io/HBVr/}, }"},{"path":"https://atsyplenkov.github.io/HBVr/index.html","id":"hbvr-","dir":"","previous_headings":"","what":"Get HBV Parameters","title":"Get HBV Parameters","text":"goal HBVr ease accessebility HBV Global Parameter maps created Beck et al. (2020). Therefore one-function package allows download cross-validation folds particular area interest (AOI).","code":""},{"path":"https://atsyplenkov.github.io/HBVr/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Get HBV Parameters","text":"can install development version HBVr GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"atsyplenkov/HBVr\")"},{"path":"https://atsyplenkov.github.io/HBVr/index.html","id":"disclaimer","dir":"","previous_headings":"","what":"Disclaimer","title":"Get HBV Parameters","text":"HBVr redistribute data provide way, encourage users cite original papers using package: Beck , Pan M, Lin P, Seibert J, van Dijk AIJM, Wood EF. 2020. Global Fully Distributed Parameter Regionalization Based Observed Streamflow 4,229 Headwater Catchments. Journal Geophysical Research: Atmospheres 125 : e2019JD031485. DOI: 10.1029/2019JD03148","code":""},{"path":"https://atsyplenkov.github.io/HBVr/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Get HBV Parameters","text":"can download mean zonal statistics retrieve SpatRaster objects:","code":"library(HBVr)  # Locate the shapefile f <- system.file(\"ex/lux.shp\", package=\"terra\") # Read it as SpatVector v <- vect(f)  zonal_stat <-    hbv_get_parameters(     aoi = v,     folds = 1,     mean = TRUE   ) #> Downloading rasters... #> Cropping rasters...  zonal_stat #> $fold_0 #>                mean #> BETA     3.59133975 #> CET      0.00000000 #> CFMAX    4.76274042 #> CFR      0.02329523 #> CWH      0.03688424 #> FC     557.79513737 #> K0       0.11312447 #> K1       0.22010622 #> K2       0.14379373 #> LP       0.78630368 #> MAXBAS   1.80986611 #> PCORR    1.00000000 #> PERC     3.55778855 #> SFCF     1.00000000 #> TT      -0.06733536 #> UZL     56.14696222 rasters <-      hbv_get_parameters(     aoi = v,     folds = 1,     mean = FALSE   ) #> Downloading rasters... #> Cropping rasters... #> Projecting rasters...  plot(rasters[[1]])"},{"path":"https://atsyplenkov.github.io/HBVr/reference/hbv_get_parameters.html","id":null,"dir":"Reference","previous_headings":"","what":"Download Global HBV Parameter Maps — hbv_get_parameters","title":"Download Global HBV Parameter Maps — hbv_get_parameters","text":"function download Global HBV Parameter Maps created Beck et al. (2020) crop shapefile boundaries. See GloH2O website details.","code":""},{"path":"https://atsyplenkov.github.io/HBVr/reference/hbv_get_parameters.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download Global HBV Parameter Maps — hbv_get_parameters","text":"","code":"hbv_get_parameters(   AOI,   folds = 1:10,   mean = FALSE,   warp = TRUE,   version = \"v0.9\" )"},{"path":"https://atsyplenkov.github.io/HBVr/reference/hbv_get_parameters.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download Global HBV Parameter Maps — hbv_get_parameters","text":"AOI SpatVector. polygon layer area interest. folds Numeric. numeric vector 1 10 indicating folds numbers process. mean Logical. TRUE, return mean zonal statistics, calculated using global method terra package warp Logical. TRUE, reproject HBV rasters AOI projection version Character. Can used determine dataset version. Must one \"v0.8\" (original release February 5, 2020) \"v0.9\" (revised version May 5, 2020). See details.","code":""},{"path":"https://atsyplenkov.github.io/HBVr/reference/hbv_get_parameters.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download Global HBV Parameter Maps — hbv_get_parameters","text":"List","code":""},{"path":"https://atsyplenkov.github.io/HBVr/reference/hbv_get_parameters.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download Global HBV Parameter Maps — hbv_get_parameters","text":"Version history (according GloH2O website): V0.9 (May 5, 2022) avoid local minima, authors reduced number   predictors three increased number generations 2000. selection   made based predictors individually provided best training score:   snowfall fraction precipitation (FSNOW), mean topographic slope (SLOPE),   soil clay content (CLAY). Increasing number generations 2000   allowed algorithm find true optimum, lowering spatial   resolution 0.05° 0.1° reduced computational requirements. V0.8 (February 5, 2020) Original release corresponding Beck et al.   (2020).","code":""},{"path":"https://atsyplenkov.github.io/HBVr/reference/hbv_get_parameters.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Download Global HBV Parameter Maps — hbv_get_parameters","text":"Beck , Pan M, Lin P, Seibert J, van Dijk AIJM, Wood EF. 2020. Global Fully Distributed Parameter Regionalization Based Observed Streamflow 4,229 Headwater Catchments. Journal Geophysical Research: Atmospheres 125 : e2019JD031485. DOI: 10.1029/2019JD031485","code":""},{"path":"https://atsyplenkov.github.io/HBVr/reference/hbv_get_parameters.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download Global HBV Parameter Maps — hbv_get_parameters","text":"","code":"# Load shapefile f <- system.file(\"ex/lux.shp\", package=\"terra\") v <- vect(f)  # Get zonal statisitcs fold1_mean <- hbv_get_parameters(v, folds = 1, mean = TRUE, warp = FALSE) #> Downloading rasters... #> Loading required namespace: pbapply #> Cropping rasters... fold1_mean #> $fold_0 #>                mean #> BETA     3.59133975 #> CET      0.00000000 #> CFMAX    4.76274042 #> CFR      0.02329523 #> CWH      0.03688424 #> FC     557.79513737 #> K0       0.11312447 #> K1       0.22010622 #> K2       0.14379373 #> LP       0.78630368 #> MAXBAS   1.80986611 #> PCORR    1.00000000 #> PERC     3.55778855 #> SFCF     1.00000000 #> TT      -0.06733536 #> UZL     56.14696222 #>   # Get rasters fold1_raster <- hbv_get_parameters(v, folds = 1, mean = FALSE, warp = FALSE) #> Downloading rasters... #> Cropping rasters... plot(fold1_raster[[1]])"},{"path":"https://atsyplenkov.github.io/HBVr/news/index.html","id":"hbvr-002","dir":"Changelog","previous_headings":"","what":"HBVr 0.0.2","title":"HBVr 0.0.2","text":"new version (v0.9) HBV parameter dataset added.","code":""},{"path":"https://atsyplenkov.github.io/HBVr/news/index.html","id":"hbvr-001","dir":"Changelog","previous_headings":"","what":"HBVr 0.0.1","title":"HBVr 0.0.1","text":"HBVr package released","code":""}]
